<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/Site.css}"/>
    <link rel="stylesheet" th:href="@{/css/zy.all.css}"/>
    <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/amazeui.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/admin.css}"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          crossorigin="anonymous">

    <style>

    </style>
<body>
<div class="dvcontent">

    <div>
        <!--tab start-->
        <div class="tabs">
            <div class="hd">
                <ul style="">
                    <li style="box-sizing: initial;-webkit-box-sizing: initial;" class="on">查看分类</li>
                    <li class="" style="box-sizing: initial;-webkit-box-sizing: initial;">添加分类</li>
                </ul>
            </div>
            <div class="bd">
                <ul style="display: block;padding: 20px;">
                    <li>
                        <!--分页显示角色信息 start-->
                        <div id="dv1">
                            <table class="table" id="tbRecord">
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>名称</th>
                                    <th>图片</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr th:each="list:${list}">
                                    <td th:text="${listStat.index}+1">1</td>
                                    <td th:text="${list.equipmentCategoryName}">肉类
                                    </td>
                                    <td class="edit" name="id" style="display:none;"
                                        th:text="${list.equipmentCategoryId}">肉类

                                    </td>
                                    <td>
                                        <img th:src="${list.equipmentCategoryPicture}" style="width:40px;">
                                    </td>
                                    <td class="edit">
                                        <!--													<a th:href="@{/SM/updateGoodsTypes(id=${list.goodsCategoryId})}">-->
                                        <!--														<i class="icon-trash bigger-120"></i>修改-->
                                        <!--													</a>-->
                                        <a class="button" href="javascript:void(0);"
                                           th:onclick="update([[${list.equipmentCategoryId}]],[[${list.equipmentCategoryName}]]);">
                  											<span class="icon-edit bigger-120">
															</span>
                                            修改名称
                                        </a>
                                        <a class="button" href="javascript:void(0);"
                                           th:onclick="showForm([[${listStat.index}]]);">
                  											<span class="icon-edit bigger-120">
															</span>
                                            修改图片

                                        </a>
                                        <a class="button" href="javascript:void(0);"
                                           th:onclick="btn_delete([[${list.equipmentCategoryId}]])"><i
                                                class="icon-trash bigger-120"></i>删除</a>
                                        <form name="form" class="am-form am-form-horizontal"
                                              enctype="multipart/form-data" style="display: none"
                                              th:action="@{/WM/pictureUpload}" method="post">
                                            <div class=" am-u-sm-push-1">
                                                <input type="text" id="" name="equipmentTypeId"
                                                       th:value="${list.equipmentCategoryId}" style="display:none">
                                                <input type="file" id="btn_file" name="headerImage">
                                                <input type="submit" class="am-btn am-btn-success" value="修改"/>
                                            </div>
                                        </form>
                                    </td>

                                </tr>
                                </tbody>

                            </table>
                        </div>
                        <!--分页显示角色信息 end-->
                    </li>
                    <nav class="mt-5" th:replace="in_apply::pagination">
                    </nav>
                </ul>
                <ul class="theme-popbod dform" style="display: none;">
                    <div class="am-cf admin-main" style="padding-top: 0px;">
                        <!-- content start -->

                        <div class="am-cf admin-main" style="padding-top: 0px;">
                            <!-- content start -->
                            <div class="admin-content">
                                <div class="admin-content-body">

                                    <div class="am-g">
                                        <div class="am-u-sm-12 am-u-md-4 am-u-md-push-8">

                                        </div>
                                        <div class="am-u-sm-12 am-u-md-8 am-u-md-pull-4"
                                             style="padding-top: 30px;">
                                            <form class="am-form am-form-horizontal" enctype="multipart/form-data"
                                                  th:action="@{/WM/addEquipmentType}" method="post">

                                                <div class="am-form-group">
                                                    <label for="user-name" class="am-u-sm-3 am-form-label">
                                                        分类名称</label>
                                                    <div class="am-u-sm-9">
                                                        <input type="text" id="user-name" required
                                                               placeholder="分类名称" name="name">
                                                        <small>10字以内...</small>
                                                    </div>
                                                </div>
                                                <div class="am-form-group">
                                                    <label for="head-image" class="am-u-sm-3 am-form-label">
                                                        图片</label>
                                                    <div class="am-u-sm-9">
                                                        <input type="file"
                                                               th:class="|custom-file-input ${error!=null?'is-invalid':''}|"
                                                               id="head-image" name="headerImage" lang="es" required="">
                                                        <label class="custom-file-label" for="head-image"
                                                               data-browse="文件">选择一张图片</label>
                                                        <div class="invalid-feedback" th:text="${error}">
                                                            该账号不存在!
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="am-form-group">
                                                    <div class="am-u-sm-9 am-u-sm-push-3">
                                                        <input type="submit" class="am-btn am-btn-success"
                                                               value="添加分类"/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- content end -->
                        </div>
                        <!-- end-->
                </ul>
            </div>
        </div>
        <!--tab end-->

    </div>

    <script th:src="@{/js/jquery-1.7.2.min.js}" type="text/javascript"></script>
    <script th:src="@{/js/plugs/Jqueryplugs.js}" type="text/javascript"></script>
    <script th:src="@{/js/_layout.js}"></script>
    <script th:src="@{/js/plugs/jquery.SuperSlide.source.js}"></script>

    <script>
        var num = 1;
        $(function () {

            $(".tabs").slide({trigger: "click"});

        });

    </script>

</div>

<script th:inline="javascript">
    var msg = [[${msg}]]
    if (msg != null) {
        alert(msg);
    }
</script>

<script th:inline="javascript">
    function update(id, name) {
        var text = prompt('修改名称', name);
        if (text != null && text !== '' && text !== name) {
            alert("修改成功");
            window.location.href = "updateEquipmentTypeName?id=" + id + "&name=" + text;
        }

    }

    var btn_delete = function (id) {
        if (window.confirm("确认删除？")) {
            window.location.href = "deleteEquipmentType?id=" + id;
        }
    }

    function showForm(i) {
        var form = document.getElementsByName('form');
        if (form[i].style.cssText === "display: none;") {
            form[i].style = "visibility:visible";
        } else if (form[i].style.cssText === "visibility: visible;") {
            form[i].style = "display:none";
        }
    }
</script>

</body>

</html>